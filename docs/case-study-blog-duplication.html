<!doctype html>
<html lang="en">
    <head>
    

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166292985-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-166292985-1');
    </script>
    

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/theme/pygment-github.css">
    <link rel="stylesheet" href="/theme/article.css"> 

    <title>Case study: removing not-so-obvious duplication</title>
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="/images/favicon/site.webmanifest">
    <link rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/images/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    
<!-- Mathjax -->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_SVG">
  MathJax.Hub.Config({
    tex2jax: {
    	inlineMath: [ ['$','$'] ],
    	processEscapes: true
    },
	"HTML-CSS": {
		fonts: ["TeX"] 
	}
  });
</script>

    </head>

    <body>
    
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: rgb(78, 76, 103);">
        <a class="navbar-brand" href="//julienharbulot.com/index.html"><img src="//julienharbulot.com/images/logo.svg" width="30" alt=""></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
                    <a class="nav-link" href="//julienharbulot.com/technical-blog.html">Technical blog</a>
            </li>
            
            <li class="nav-item">
                    <a class="nav-link" href="//julienharbulot.com/maths.html">Maths</a>
            </li>
            
            <li class="nav-item">
                    <a class="nav-link" href="//julienharbulot.com/research.html">Research</a>
            </li>
            
            <li class="nav-item">
                    <a class="nav-link" href="//julienharbulot.com/projects.html">Projects</a>
            </li>
            
            <!--<li class="nav-item">
                <a class="nav-link" href="//julienharbulot.com/about-me.html">About me</a>
            </li>-->
            

<li class="nav-item dropdown">
    <a class="nav-link active dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Table of content
    </a>
    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
        <div class="toc"><ul>
<li class="toc-entry-1">
<a class='toc-href dropdown-item' href='#a-pipeline-to-generate-the-blog' title='A pipeline to generate the blog'>A pipeline to generate the blog</a>
</li>
<div class="dropdown-divider"></div>
<li class="toc-entry-1">
<a class='toc-href dropdown-item' href='#hacks-to-fit-everything-into-the-pipeline' title='Hacks to fit everything into the pipeline'>Hacks to fit everything into the pipeline</a>
</li>
<div class="dropdown-divider"></div>
<li class="toc-entry-1">
<a class='toc-href dropdown-item' href='#identifying-duplication' title='Identifying duplication'>Identifying duplication</a>
</li>
<div class="dropdown-divider"></div>
<li class="toc-entry-1">
<a class='toc-href dropdown-item' href='#handling-duplication' title='Handling duplication'>Handling duplication</a>
    <ul>
<li class="toc-entry-2">
    <a class='toc-href dropdown-item' href='#hello-again-mvc' title='Hello again, MVC'>Hello again, MVC</a>
    </li>
    </ul>
</li>
<div class="dropdown-divider"></div>
<li class="toc-entry-1">
<a class='toc-href dropdown-item' href='#benefits-of-a-clean-architecture' title='Benefits of a clean architecture'>Benefits of a clean architecture</a>
</li>
<div class="dropdown-divider"></div>
<li class="toc-entry-1">
<a class='toc-href dropdown-item' href='#final-words' title='Final words'>Final words</a>
</li>
</ul><div>
    </div>
</li>


            </ul>
        </div>
    </nav>
    
    
    
    <div class="container">
    <div class="row mt-5">
      <div class="col-lg-8 mx-auto"> 
        <h1 class="display-5">Case study: removing not-so-obvious duplication </h1>
        <div class="text-right">24 Sep 2019</div>
      </div>
    </div>
    <div class="row mt-5">
    <article class="col-lg-8 mx-auto">
    <p>I detected a not-so-obvious case of code duplication in my <em>blog's compiler</em> and had to rethink my architecture to handle it. Here's the story. </p>
<p>Before we start, a bit of context: I write my articles in markdown files and use a python program to build the blog from them. It takes <code>.md</code> files as input and produces <code>.html</code> files as output. </p>
<div class="toc"><span class="toctitle">Table of contents</span><ul>
<li><a href="#a-pipeline-to-generate-the-blog">A pipeline to generate the blog</a></li>
<li><a href="#hacks-to-fit-everything-into-the-pipeline">Hacks to fit everything into the pipeline</a></li>
<li><a href="#identifying-duplication">Identifying duplication</a></li>
<li><a href="#handling-duplication">Handling duplication</a><ul>
<li><a href="#hello-again-mvc">Hello again, MVC</a></li>
</ul>
</li>
<li><a href="#benefits-of-a-clean-architecture">Benefits of a clean architecture</a></li>
<li><a href="#final-words">Final words</a></li>
</ul>
</div>
<p>For future reference, here's what a typical markdown file looks like. The block at the beginning is called the frontmatter. </p>
<div class="hll-title"><span class="filename">my-article.md </span> <div class="hll"><pre><span></span>---
title: Markdown preview
tags: markdown, introductory
category: dummy
---

This is the article&#39;s content. Markdown syntax looks like this: 
*italic* ; **bold** ; `some_code()` ; [a link](https://julienharbulot.com).
My generator will also parse [internal links]({ filename }my-other-article.md)
</pre></div>
 </div>

<p>By the way, programs that generate websites from source files are commonly called <em>static site generators</em>. </p>
<p><img alt="Static site generator" src="https://snipcart.com/media/203662/ssg1.png?width=400&amp;format=webp&amp;quality=100&amp;upscale=false" /></p>
<h2 id="a-pipeline-to-generate-the-blog">A pipeline to generate the blog</h2>
<p>I decided on a whim to code my own blog generator, spared a few hours one night, and started coding. Given the time constraints, I went with a very simple architecture: the generator will take the input files in markdown format, apply a series of transformations to gradually modify them and produce HTML files as output. </p>
<p>To emphasize modularity, each step of the pipeline is implemented in a separate function. I initially thought about using classes that have a <code>process(articles, context)</code> method, but then remembered that: </p>
<blockquote class="blockquote text-center">
  <p class="mb-0">If it has two methods and one of them is <code>__init__</code>: it's not a class.</p>
  <footer class="blockquote-footer"> Jack Diederich in <a href="https://www.youtube.com/watch?v=o9pEzgHorH0&t=1261s"><cite title="Stop writing classes">Stop writing classes</cite></a>.</footer>
</blockquote>

<p>Back to the pipeline. The most important steps are:</p>
<div class="hll-title"><span class="filename">compile.py </span> <div class="hll"><pre><span></span><span class="n">processors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">load_markdown_files</span><span class="p">,</span>
    <span class="n">read_frontmatter</span><span class="p">,</span>
    <span class="n">parse_markdown</span><span class="p">,</span>
    <span class="n">render_html</span><span class="p">,</span>
    <span class="n">write_html_files</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">articles</span><span class="p">,</span> <span class="n">context</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processors</span><span class="p">:</span>
    <span class="n">p</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">articles</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
 </div>

<p>The actual pipeline is a lot longer. Here's what it looked like before I removed the nasty duplication:</p>
<div class="hll-title"><span class="filename">compile.py </span> <div class="hll"><pre><span></span><span class="n">processors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">load_from_disk</span><span class="p">(</span><span class="n">dictclass</span><span class="o">=</span><span class="n">super_dict</span><span class="p">),</span>
    <span class="n">read_frontmatter</span><span class="p">,</span>
    <span class="n">remove_drafts</span><span class="p">,</span>
    <span class="n">add_default_metas</span><span class="p">(</span><span class="n">default_meta</span><span class="p">),</span>
    <span class="n">add_common_meta</span><span class="p">,</span>
    <span class="n">compute_output_filepath</span><span class="p">,</span>
    <span class="n">sort_by_creation_date</span><span class="p">,</span>
    <span class="n">rename_meta</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="s1">&#39;categories&#39;</span><span class="p">),</span>
    <span class="n">convert_meta_str_to_list</span><span class="p">([</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;categories&#39;</span><span class="p">]),</span>
    <span class="n">parse_meta_list</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">),</span>
    <span class="n">parse_meta_list</span><span class="p">(</span><span class="s1">&#39;categories&#39;</span><span class="p">),</span>
    <span class="n">cross_ref</span><span class="p">(</span><span class="s1">&#39;tags&#39;</span><span class="p">,</span> <span class="s1">&#39;categories&#39;</span><span class="p">),</span>
    <span class="n">add_meta_for_categories</span><span class="p">,</span>
    <span class="n">add_articles_to_context</span><span class="p">,</span>
    <span class="n">parse_youtube_tags</span><span class="p">,</span>
    <span class="n">parse_markdown</span><span class="p">,</span>
    <span class="n">translate_links</span><span class="p">,</span>
    <span class="n">parse_table_of_content</span><span class="p">,</span>
    <span class="n">render_html</span><span class="p">,</span>
    <span class="n">generate_articles</span><span class="p">,</span>
    <span class="n">generate_categories</span><span class="p">,</span>
    <span class="n">generate_index</span><span class="p">,</span>
    <span class="n">copy_images</span><span class="p">,</span>
    <span class="n">remove_old_files</span>
<span class="p">]</span>

<span class="n">articles</span><span class="p">,</span> <span class="n">context</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processors</span><span class="p">:</span>
    <span class="n">p</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">articles</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>
 </div>

<p>Apart from some configuration details, what you see above was the full code in my <code>compile.py</code> file. That's it. All the logic is implemented in the processors. And if I want to change <em>anything</em>, I just have to add or remove one. </p>
<p>I find very appealing this idea of having a simple pipeline at the core of my compiler and all the logic implemented in the processors that behave like small plugin functions.</p>
<h2 id="hacks-to-fit-everything-into-the-pipeline">Hacks to fit everything into the pipeline</h2>
<p>Up until <code>generate_articles</code>, the pipeline is just a series of transformations applied on the articles.  For instance, <code>render_html</code> uses Jinja2 templates to produce the html and <code>generate_articles</code> writes it to html files:</p>
<div class="hll"><pre><span></span><span class="k">def</span> <span class="nf">render_html</span><span class="p">(</span><span class="n">articles</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">jinja2</span> <span class="o">=</span> <span class="n">setup_skipped_for_brevity</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">article</span> <span class="ow">in</span> <span class="n">articles</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">jinja2</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="n">article</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
        <span class="n">article</span><span class="o">.</span><span class="n">html</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">article</span><span class="o">=</span><span class="n">article</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>


<div class="hll"><pre><span></span><span class="k">def</span> <span class="nf">generate_articles</span><span class="p">(</span><span class="n">articles</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">article</span> <span class="ow">in</span> <span class="n">articles</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">article</span><span class="o">.</span><span class="n">html</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">article</span><span class="o">.</span><span class="n">output_path</span>
        <span class="n">filepath</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>


<p>The last few processors, however, are pseudo processors. They don't use the <code>articles</code> argument provided and just do something else. That's a <em>neat trick</em> I found to keep everything in the pipeline.</p>
<p>For instance, the <code>copy_images</code> processors takes the images in the input folder and copies them into the <code>html</code> folder:</p>
<div class="hll"><pre><span></span><span class="c1"># notice how the first argument is ignored</span>
<span class="k">def</span> <span class="nf">copy_images</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">copytree</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">input_dir_img</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">output_dir_img</span><span class="p">)</span>
    <span class="c1"># okay, that&#39;s not the full code, but you get the idea.</span>
    <span class="c1"># ps: input_dir is a pathlib.Path object so using / is valid python code</span>
</pre></div>


<p>And <code>generate_index</code> uses another Jinja2 template to create the index page. It looks like this:</p>
<div class="hll"><pre><span></span><span class="c1"># notice how the firt argument is ignored</span>
<span class="k">def</span> <span class="nf">generate_index</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">additional_data</span> <span class="o">=</span> <span class="n">skipped_for_brevity</span><span class="p">()</span>
    <span class="n">jinja2</span> <span class="o">=</span> <span class="n">setup_skipped_for_brevity</span><span class="p">()</span>

    <span class="n">template</span> <span class="o">=</span> <span class="n">jinja2</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s1">&#39;index.template&#39;</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">additional_data</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
    <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</pre></div>


<p>So far, so good. I can put unused arguments in the interface of my functions to fit them into the pipeline... But wait.</p>
<h2 id="identifying-duplication">Identifying duplication</h2>
<p>Duplication don't necessarily mean <em>copy &amp; paste</em>. I consider that <strong>duplication happens when we have to change the code in <em>more than one</em> place in order to change <em>one</em> functionality</strong>. It is error prone because we might forget one place. And it's a waste of time.</p>
<p>Duplication within the same, short function is not that bad. We can use macros and search/replace to edit it. But duplication across different functions or different files? The worst.</p>
<p>The snippet for <code>generate_index</code> shown above is full of duplication. First, the function does two distinct things: render the html and write it to file. They were put in different processors for the articles pipeline, so why are they together here?</p>
<p>It might not seem like a big deal. After all, it's only three lines of code. But what if I change library for rendering html? Or what if I implement a new processor named <code>remove_old files</code> and this processor requires that each newly written files be put in the <code>context</code>, to make sure it won't get removed? Then, one duplicated line for writing a file becomes two duplicated lines:</p>
<div class="hll"><pre><span></span>open(&#39;index.html&#39;, &#39;w&#39;).write(html)
context.written_files.append(&#39;index.html&#39;)
</pre></div>


<p>And what If I add a cache and this cache requires... Well you got the idea.</p>
<h2 id="handling-duplication">Handling duplication</h2>
<p>I already have some code to render html in <code>render_html</code> and to write files in <code>generate_articles</code>. Can I reuse it to render and write my index page?</p>
<p>The code for html rendering has exactly the same structure in both functions and I can also reuse the code for writing a file as-is. So if my index were in the <code>articles</code> dictionary I could transparently reuse them both. Let's do that.</p>
<div class="hll"><pre><span></span><span class="k">def</span> <span class="nf">create_index</span><span class="p">(</span><span class="n">articles</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">articles</span><span class="p">[</span><span class="s1">&#39;index.html&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">output_path</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span><span class="p">,</span>
        <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.template&#39;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">)</span>
</pre></div>


<p>Likewise, I can rename <code>articles_generator</code> to simply be <code>write_html_files</code>:</p>
<div class="hll"><pre><span></span><span class="k">def</span> <span class="nf">write_html_files</span><span class="p">(</span><span class="n">articles</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">article</span> <span class="ow">in</span> <span class="n">articles</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">article</span><span class="o">.</span><span class="n">html</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">article</span><span class="o">.</span><span class="n">output_path</span>
        <span class="n">filepath</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>


<p>And the pipeline becomes:</p>
<div class="hll-title"><span class="filename">compile.py </span> <div class="hll"><pre><span></span><span class="n">processors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">create_index</span><span class="p">,</span>
    <span class="n">render_html</span><span class="p">,</span>
    <span class="n">write_html_files</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
 </div>

<p>Actually, since my pipeline is now fit to handle generic <em>pages</em> and not just articles, let's rename the variable <code>articles</code> to <code>pages</code>:</p>
<div class="hll"><pre><span></span><span class="n">pages</span><span class="p">,</span> <span class="n">context</span> <span class="o">=</span> <span class="p">{},</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">processors</span><span class="p">:</span>
    <span class="n">p</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">pages</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</pre></div>


<h3 id="hello-again-mvc">Hello again, MVC</h3>
<p>After these modifications, a Model / View / Controller (MVC) architecture emerges :</p>
<ul>
<li>My controller is the <code>for</code> loop to execute the pipeline.</li>
<li>My model is the <code>(articles, context)</code> pair that contains the data for all pages.</li>
</ul>
<p>In other words, I have an abstract concept of <code>pages</code> that can be either an <code>article</code> or an <code>index page</code> or a <code>category page</code> or whatever. Then, I have a pipeline to modify these pages' attributes until they're fit to be written on disk.</p>
<p>On the other hand, before the refactoring, <code>generate_index</code> was writing a new html file in the output directory in a completely <em>ad hoc</em> way.</p>
<h2 id="benefits-of-a-clean-architecture">Benefits of a clean architecture</h2>
<p>When I decided to implement a cache, this new code structure came in handy :</p>
<ul>
<li>each page's version is identified with a hash of what it depends on. The hash is computed when the page is created. For the articles, it's their markdown content ; for the index it's the concatenated metadata used to build the listing.</li>
<li>so I can add a processor <code>remove_if_cached</code> that uses this hash and check if the page output is in cache. If it is, then simply remove the page from the pipeline.</li>
</ul>
<div class="hll"><pre><span></span><span class="n">processors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">create_index</span><span class="p">,</span>
    <span class="n">remove_if_cached</span><span class="p">,</span>  <span class="c1"># &lt;---</span>
    <span class="n">render_html</span><span class="p">,</span>
    <span class="n">write_html_files</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>


<p>And the processor will indifferently cache the article and the newly injected index page. Whereas with my previous <code>generate_index</code> I would have had to duplicate the cache logic to cache the index.</p>
<h2 id="final-words">Final words</h2>
<p>My simple <em>static generator</em> is far from being perfectly designed and will organically evolve as I add new features. If I implement something and end up having to make modifications in multiple functions or files, I'll know that I have another case of duplication and fight it like it should.</p>
<p>That's it for today! I hope this case study inspired you to find duplication in your own codebases and relentlessly hunt it. </p>
    </article>
    </div><!-- row -->
    
    <div class="row mt-1">
      <article class="col-lg-8 mx-auto recommendations">
        <p class='title'>Other articles you might like:</p>
        <ul>
          
            <li class="en"><img class="flag-icon" src="//julienharbulot.com/images/languages/en.png"> <a href="//julienharbulot.com/win-extend-screen.html">Keyboard shortcut and command line utility to switch display (Windows)</a></li>
          
            <li class="en"><img class="flag-icon" src="//julienharbulot.com/images/languages/en.png"> <a href="//julienharbulot.com/wsl-dev-environment-2020.html">Using WSL-2 as a dev environment</a></li>
          
        </ul>
      </article>
    </div>
    
    
    <div class="row mb=5 mt-5">
      <article class="col-lg-8 mx-auto">
        <div id="hyvor-talk-view"></div>
        <script type="text/javascript">
            var HYVOR_TALK_WEBSITE = '625';
            var HYVOR_TALK_CONFIG = {
                url: 'case-study-blog-duplication.html',
                id: 'case-study-blog-duplication.html'
            };
        </script>
      </article>
    </div><!-- row -->
    
    <footer class="row">
        <div class="col-lg-8 mx-auto text-center">
          <p><small>
          
            Last updated: 01/14/21 <br/>
          
          
          Copyright &copy; 2021 Julien Harbulot
          </small></p>
        </div>
    </footer>
    </div>

  <script>
  // bootstrap table
  tables = document.getElementsByTagName('table');
  for (i = 0; i < tables.length; i++) {
    tables[i].classList.add('table');
    tables[i].classList.add('table-bordered');
  }

  // Paragraphs that contain only images are marked with custom class for styling
  ps = document.getElementsByTagName('p');
  Array.from(ps).forEach(function(p){
    if (p.getElementsByTagName('img').length > 0 && p.textContent.trim().length == 0) {
        p.classList.add('img-container');
    }
  });
  </script>


    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
        prev_onload_a = window.onload;
        window.onload = function() {
            if (prev_onload_a) {
                prev_onload_a();
            }
            var navlinks = document.getElementsByClassName("nav-link");
            var i;
            for (i = 0; i < navlinks.length; i++) {
                const target = new URL(navlinks[i].href)
                if (location.pathname == target.pathname) {
                    navlinks[i].classList.add('active')
                }
            }
        }
    </script>    

    

<script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script>


    </body>
</html>